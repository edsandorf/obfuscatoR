---
title: "vignette-obfuscatoR"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{vignette-obfuscatoR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(obfuscatoR)
```

# Introduction


## A one shot obfuscation game
To create a design for the obfuscation game, we start by specifying the parameters of the game. These are given by the list `design_opt`. For a full list of the design options and their default values, please see `?check_design_opt`. Note that this function is only called internally to set the defaults for any parameter not specified by the user. 

Let us create a simple one shot obfuscation game. Assume that there are 4 rules, 5 actions and that the considered rule is number 3. This is the minimum information necessary to generate a game design.

```{r}
design_opt_input <- list(rules = 4,
                         actions = 5,
                         considered_rule = 3)

design <- generate_designs(design_opt_input)
```

We can take a look at the generated design

```{r}
print_ra(design, design_opt_input$considered_rule, FALSE)
```

If we want to print some extra information about the process of finding a design, we can set `print_all = TRUE`. 

```{r}
print_ra(design, design_opt_input$considered_rule, TRUE)
```

It is poosible to see the exact design conditions that were met or not by extracting the relevant attribute of the rules-action matrix with `attr(design, "design_conditions")`. 

To identify the entropy maximizing action, we need to calculate the entropy.

```{r}
entropy <- calc_entropy(design)
print_entropy(entropy)
```

We can inspect all the calculations by setting `print_all = TRUE`. 

```{r}
print_entropy(entropy, print_all = TRUE)
```



## Placing restrictions on the game

The simple game where we only specify the number of rules, actions and which rule is considered may produce games that are less than desirable. obfuscatoR has several options to place restrictions on the design to create games that are more tailored to your needs. 


# Examples
In this section, we will present two examples of the obfuscation game to illustrate the subtleties of obfuscation behavior. We are using a simple game with four rules and five possible actions. For details on how to generate such a design, please see above. 

## Example 1


```{r}
ra_mat <- matrix(c(-1, -1, -1, -1,  1,
                   -1,  0,  0, -1,  0,
                   -1,  0, -1,  0,  0,
                    0,  0, -1,  0, -1), nrow = 4, byrow = TRUE)

entropy <- calc_entropy(ra_mat)
```

## Example 2


```{r}
ra_mat <- matrix(c(-1, -1, -1, -1,  1,
                   -1,  0,  0, -1, -1,
                   -1, -1,  0,  0,  0,
                    0,  0, -1, -1, -1), nrow = 4L, byrow = TRUE)
```

